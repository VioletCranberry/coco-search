---
phase: 07-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md]
autonomous: true

must_haves:
  truths:
    - "README has clear one-line description of what CocoSearch does"
    - "User can see architecture diagram showing how components connect"
    - "User can follow Quick Start to index and search a codebase"
    - "User can install Ollama and pull nomic-embed-text model"
    - "User can start PostgreSQL with pgvector (Docker or native)"
    - "User can install CocoSearch via UV"
  artifacts:
    - path: "README.md"
      provides: "Project documentation with quick start and installation"
      min_lines: 150
      contains: ["## Quick Start", "## Installation", "Ollama", "PostgreSQL", "pgvector"]
  key_links:
    - from: "README.md"
      to: "pyproject.toml"
      via: "installation commands"
      pattern: "uv sync"
    - from: "README.md"
      to: "docker-compose.yml"
      via: "docker compose up"
      pattern: "docker compose up"
---

<objective>
Create README.md with project introduction, architecture diagram, Quick Start guide, and full installation instructions.

Purpose: Enable new users to understand what CocoSearch is and get it running on their machine.
Output: README.md with introduction, architecture, quick start, and installation sections (~200 lines).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-documentation/07-CONTEXT.md
@.planning/phases/07-documentation/07-RESEARCH.md
@docker-compose.yml
@pyproject.toml
@src/cocosearch/cli.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create README structure with introduction and architecture</name>
  <files>README.md</files>
  <action>
Replace the existing empty README.md with a comprehensive introduction:

1. **Title and tagline**: "# CocoSearch" followed by "Local-first semantic code search via MCP. Search your codebase using natural language, entirely offline."

2. **What CocoSearch Does section**: Brief explanation (3-4 bullet points):
   - Index codebases using Ollama embeddings stored in PostgreSQL with pgvector
   - Search semantically via CLI or any MCP-compatible client
   - Stay private - everything runs locally
   - Supports Claude Code, Claude Desktop, and OpenCode

3. **Architecture Diagram** using Mermaid (GitHub renders natively):
```mermaid
flowchart LR
    subgraph Local
        Code[Codebase] --> Indexer
        Indexer --> |embeddings| PG[(PostgreSQL + pgvector)]
        Ollama[Ollama] --> |nomic-embed-text| Indexer
    end

    subgraph Clients
        CLI[CLI] --> Search
        Claude[Claude Code/Desktop] --> |MCP| Search
        OpenCode --> |MCP| Search
    end

    Search --> PG
    Ollama --> Search
```

4. **Table of Contents** (use markdown headers - GitHub auto-generates outline):
   - Quick Start
   - Installation
   - MCP Configuration (placeholder: "See below")
   - CLI Reference (placeholder: "See below")
   - Configuration

Use beginner-friendly tone. Explain that pgvector is "a PostgreSQL extension for vector similarity search".
  </action>
  <verify>cat README.md | head -80 shows title, description, architecture diagram, and section headers</verify>
  <done>README.md has introduction with architecture diagram and section structure</done>
</task>

<task type="auto">
  <name>Task 2: Add Quick Start guide</name>
  <files>README.md</files>
  <action>
Add "## Quick Start" section after architecture diagram. Show the fastest path to value.

**Prerequisites check** (brief, links to Installation for details):
- Ollama running with nomic-embed-text
- PostgreSQL with pgvector
- CocoSearch installed

**CLI Demo** (satisfies README-01):
```bash
# Index your project
cocosearch index ./my-project

# Search semantically
cocosearch search "authentication logic" --pretty

# Or enter interactive mode
cocosearch search --interactive
```

Show expected output for the index command:
```
Using derived index name: my_project
Indexing ./my-project...
[progress bar]
Indexed 42 files (127 chunks)
```

**MCP Quick Path** (satisfies README-02, brief teaser):
"For use with Claude Code, Claude Desktop, or OpenCode, see MCP Configuration below."

Keep this section concise (under 40 lines). Users should be able to scan it in 30 seconds.
  </action>
  <verify>grep -A 30 "## Quick Start" README.md shows CLI demo with expected output</verify>
  <done>Quick Start section demonstrates index and search workflow</done>
</task>

<task type="auto">
  <name>Task 3: Add complete Installation guide</name>
  <files>README.md</files>
  <action>
Add "## Installation" section with detailed step-by-step instructions.

**1. Install Ollama** (INST-01):
```bash
# macOS
brew install ollama

# Linux (via curl)
curl -fsSL https://ollama.com/install.sh | sh
```

Start Ollama and pull the embedding model:
```bash
ollama serve  # In a separate terminal, or runs as service on macOS
ollama pull nomic-embed-text
```

Verification: `ollama list` should show nomic-embed-text

**2. Start PostgreSQL with pgvector** (INST-02):

Option A - Docker (recommended):
```bash
docker compose up -d
```

Note: Uses docker-compose.yml from repository. Creates container `cocosearch-db` on port 5432.

Option B - Native PostgreSQL:
```bash
# macOS with Homebrew
brew install postgresql@17 pgvector
brew services start postgresql@17
createdb cocoindex
psql cocoindex -c "CREATE EXTENSION vector;"
```

Verification: `docker ps` shows container OR `psql -c "SELECT 1"` succeeds

**3. Install CocoSearch** (INST-03):
```bash
# Clone and install
git clone https://github.com/username/coco-s.git
cd coco-s
uv sync

# Verify installation
uv run cocosearch --help
```

Set database URL (if not using default Docker setup):
```bash
export COCOINDEX_DATABASE_URL="postgresql://cocoindex:cocoindex@localhost:5432/cocoindex"
```

Cover macOS, Linux explicitly. Add note for Windows: "Windows users: Use WSL2 for best compatibility."
  </action>
  <verify>grep -A 60 "## Installation" README.md shows Ollama, PostgreSQL (both options), and CocoSearch install steps</verify>
  <done>Installation section covers all three prerequisites with verification steps</done>
</task>

</tasks>

<verification>
- [ ] README.md exists and is not empty
- [ ] Has title "# CocoSearch" and one-line description
- [ ] Has Mermaid architecture diagram
- [ ] Has "## Quick Start" with CLI demo
- [ ] Has "## Installation" with Ollama, PostgreSQL, CocoSearch steps
- [ ] Shows both Docker and native PostgreSQL options
- [ ] Includes verification commands for each step
</verification>

<success_criteria>
New user can:
1. Understand what CocoSearch does from first 10 lines
2. See system architecture at a glance
3. Follow Quick Start to index and search
4. Follow Installation to set up all prerequisites
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation/07-01-SUMMARY.md`
</output>
