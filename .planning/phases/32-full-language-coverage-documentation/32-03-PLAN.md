---
phase: 32-full-language-coverage-documentation
plan: 03
type: execute
wave: 2
depends_on: ["32-01", "32-02"]
files_modified:
  - README.md
autonomous: true

must_haves:
  truths:
    - "User can find Quick Start section that gets them searching in 5 minutes"
    - "User can find documentation for hybrid search with before/after examples"
    - "User can find documentation for symbol filtering with examples"
    - "User can find documentation for context expansion with examples"
    - "User can find list of all supported languages with extensions"
    - "User can find MCP configuration for Claude Desktop"
  artifacts:
    - path: "README.md"
      provides: "Comprehensive v1.7 feature documentation"
      contains: "Hybrid Search"
    - path: "README.md"
      provides: "Symbol filtering documentation"
      contains: "Symbol Filtering"
    - path: "README.md"
      provides: "Context expansion documentation"
      contains: "Context Expansion"
    - path: "README.md"
      provides: "Supported languages section"
      contains: "Supported Languages"
  key_links:
    - from: "README.md"
      to: "CLI commands"
      via: "documented flags"
      pattern: "--hybrid|--symbol-type|--symbol-name|-A|-B|-C"
---

<objective>
Expand README.md with comprehensive documentation for all v1.7 features: hybrid search, symbol filtering, context expansion, and supported languages.

Purpose: Enable users to discover and effectively use all CocoSearch features.
Output: README.md expanded with Quick Start, feature documentation, and language reference.
</objective>

<execution_context>
@/Users/fedorzhdanov/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fedorzhdanov/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/32-full-language-coverage-documentation/32-CONTEXT.md
@.planning/phases/32-full-language-coverage-documentation/32-RESEARCH.md
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Quick Start section</name>
  <files>README.md</files>
  <action>
Add a Quick Start section near the top of README (after "What CocoSearch Does", before "Architecture") that gets users searching in 5 minutes.

Insert after the "What CocoSearch Does" section:

```markdown
## Quick Start (5 minutes)

**Prerequisites:** Docker installed.

**1. Start services** (PostgreSQL + Ollama in one container):

```bash
docker run -d --name cocosearch \
  -v cocosearch-data:/data \
  -v "$PWD":/mnt/repos:ro \
  -p 3000:3000 \
  cocosearch
```

**2. Index your code:**

```bash
# Wait ~90 seconds for container startup, then:
docker exec cocosearch cocosearch index /mnt/repos --name myproject
```

**3. Search:**

```bash
docker exec cocosearch cocosearch search "authentication logic" --index myproject --pretty
```

**That's it!** For local development setup without Docker, see [Installing](#installing).
```

Update the Table of Contents to include Quick Start at the top.
  </action>
  <verify>Grep README.md for "Quick Start (5 minutes)" - should find the section</verify>
  <done>Quick Start section exists with 3-step Docker workflow</done>
</task>

<task type="auto">
  <name>Task 2: Add v1.7 feature documentation sections</name>
  <files>README.md</files>
  <action>
Add new sections documenting v1.7 features. Insert after CLI Reference section, before Troubleshooting Docker.

Add to Table of Contents:
```markdown
- [ğŸ” Search Features](#search-features)
  - [Hybrid Search](#hybrid-search)
  - [Symbol Filtering](#symbol-filtering)
  - [Context Expansion](#context-expansion)
- [ğŸ“š Supported Languages](#supported-languages)
```

Add new sections:

```markdown
## Search Features

CocoSearch v1.7 introduces advanced search capabilities: hybrid search for better identifier matching, symbol filtering for navigating code structure, and smart context expansion for understanding matches.

### Hybrid Search

**When to use:** Searching for specific identifiers (function names, class names, variables) where exact matches matter alongside semantic similarity.

**The problem:** Pure semantic search finds conceptually similar code but may miss exact identifier matches.

**Without hybrid search:**
```bash
cocosearch search "getUserById" --pretty
# May return: getUserByEmail, fetchUser, getProfile (semantically similar but not exact)
```

**With hybrid search:**
```bash
cocosearch search "getUserById" --hybrid --pretty
# Returns: getUserById exact match boosted to top, then semantically similar results
```

**How it works:** Combines vector similarity (semantic meaning) with PostgreSQL full-text search (keyword matching). Results are ranked using Reciprocal Rank Fusion (RRF) to balance both signals.

**Auto-detection:** Hybrid search automatically enables for queries containing identifier patterns (camelCase like `getUserById` or snake_case like `get_user_by_id`).

| Mode | CLI Flag | MCP Parameter | Behavior |
|------|----------|---------------|----------|
| Auto (default) | (none) | (none) | Enables hybrid for identifier patterns |
| Force on | `--hybrid` | `use_hybrid: true` | Always use hybrid search |
| Force off | (not available) | `use_hybrid: false` | Vector-only search |

### Symbol Filtering

**When to use:** Finding specific types of code elements (functions, classes, methods) or searching for symbols by name pattern.

**Filter by type:**
```bash
# Find all functions matching "auth"
cocosearch search "auth" --symbol-type function --pretty

# Find classes matching "User"
cocosearch search "User" --symbol-type class --pretty

# Find both functions and methods (OR logic)
cocosearch search "handler" --symbol-type function --symbol-type method --pretty
```

**Filter by name pattern:**
```bash
# Find symbols starting with "get"
cocosearch search "database operations" --symbol-name "get*" --pretty

# Find symbols ending with "Handler"
cocosearch search "request processing" --symbol-name "*Handler" --pretty

# Combine type and name filters (AND logic)
cocosearch search "validation" --symbol-type function --symbol-name "validate*" --pretty
```

**Available symbol types:**
- `function` - Standalone functions
- `class` - Class definitions
- `method` - Methods within classes
- `interface` - Interfaces, traits, type aliases

**Symbol-aware languages:** Python, JavaScript, TypeScript, Go, Rust. Other languages are indexed but without symbol extraction.

| Filter | CLI Flag | MCP Parameter |
|--------|----------|---------------|
| Type | `--symbol-type <type>` | `symbol_type: ["function"]` |
| Name | `--symbol-name <pattern>` | `symbol_name: "get*"` |

### Context Expansion

**When to use:** Understanding code in context - seeing the function or class containing a match.

**Fixed context lines:**
```bash
# Show 5 lines before and after each match
cocosearch search "database connection" -C 5 --pretty

# Show 10 lines after (like grep -A)
cocosearch search "error handling" -A 10 --pretty

# Show 3 lines before (like grep -B)
cocosearch search "config parsing" -B 3 --pretty
```

**Smart context (default):**

By default, CocoSearch expands context to include the enclosing function or class boundary, up to 50 lines centered on the match.

```bash
# Smart context enabled by default
cocosearch search "parse config" --pretty
# Shows entire function containing the match

# Disable smart context for fixed line counts only
cocosearch search "parse config" -C 5 --no-smart --pretty
```

**How smart context works:**
1. Finds the enclosing function/class using tree-sitter parsing
2. Expands to include the full scope (up to 50 lines max)
3. Centers the expansion on the original match location
4. Falls back to fixed lines if no enclosing scope found

| Option | CLI Flag | MCP Parameter | Behavior |
|--------|----------|---------------|----------|
| Lines after | `-A <n>` | `context_after: n` | Show n lines after match |
| Lines before | `-B <n>` | `context_before: n` | Show n lines before match |
| Both | `-C <n>` | (set both) | Show n lines before and after |
| Smart expand | (default) | (default) | Expand to function/class boundary |
| No smart | `--no-smart` | (explicit lines) | Disable smart expansion |

[â†‘ Back to top](#table-of-contents)

## Supported Languages

CocoSearch indexes 30+ programming languages using CocoIndex's Tree-sitter integration.

**View all languages:**
```bash
cocosearch languages
```

**Output:**
```
                Supported Languages
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”“
â”ƒ Language     â”ƒ Extensions            â”ƒ Symbols â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”©
â”‚ Python       â”‚ .py, .pyw, .pyi       â”‚    âœ“    â”‚
â”‚ JavaScript   â”‚ .js, .mjs, .cjs       â”‚    âœ“    â”‚
â”‚ TypeScript   â”‚ .ts, .tsx, .mts, .cts â”‚    âœ“    â”‚
â”‚ Go           â”‚ .go                   â”‚    âœ“    â”‚
â”‚ Rust         â”‚ .rs                   â”‚    âœ“    â”‚
â”‚ Java         â”‚ .java                 â”‚    âœ—    â”‚
â”‚ C            â”‚ .c, .h                â”‚    âœ—    â”‚
â”‚ C++          â”‚ .cpp, .cc, .hpp       â”‚    âœ—    â”‚
â”‚ YAML         â”‚ .yaml, .yml           â”‚    âœ—    â”‚
â”‚ JSON         â”‚ .json                 â”‚    âœ—    â”‚
â”‚ Markdown     â”‚ .md, .mdx             â”‚    âœ—    â”‚
â”‚ ...          â”‚ ...                   â”‚   ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Symbol-aware languages (âœ“):** Support `--symbol-type` and `--symbol-name` filtering. These languages have full function, class, and method extraction.

**Other languages (âœ—):** Indexed for semantic search but without symbol metadata.

### Language Statistics

View per-language breakdown for an index:

```bash
cocosearch stats myproject --pretty
```

**Output:**
```
Index: myproject
Files: 68 | Chunks: 488 | Size: 2.1 MB

           Language Statistics
â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”“
â”ƒ Language   â”ƒ Files â”ƒ Chunks â”ƒ  Lines â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”©
â”‚ python     â”‚    42 â”‚    287 â”‚  3,521 â”‚
â”‚ typescript â”‚    18 â”‚    156 â”‚  2,103 â”‚
â”‚ markdown   â”‚     5 â”‚     32 â”‚    654 â”‚
â”‚ yaml       â”‚     3 â”‚     13 â”‚    238 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL      â”‚    68 â”‚    488 â”‚  6,516 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**JSON output** for scripting:
```bash
cocosearch stats myproject --json
```

### DevOps Languages

CocoSearch includes specialized support for infrastructure-as-code:

| Language | Extensions | Block Detection |
|----------|------------|-----------------|
| HCL (Terraform) | `.tf`, `.hcl` | Resources, modules, variables |
| Dockerfile | `Dockerfile` | Instructions (FROM, RUN, etc.) |
| Bash | `.sh`, `.bash` | Functions |

**Filter by DevOps language:**
```bash
cocosearch search "s3 bucket" --lang hcl --pretty
cocosearch search "base image" --lang dockerfile --pretty
```

[â†‘ Back to top](#table-of-contents)
```
  </action>
  <verify>
Grep README.md for these section headers:
- "Hybrid Search"
- "Symbol Filtering"
- "Context Expansion"
- "Supported Languages"
All should be present.
  </verify>
  <done>
- Hybrid Search section with before/after examples
- Symbol Filtering section with type and name examples
- Context Expansion section with flag examples
- Supported Languages section with languages command output
- Language Statistics section showing stats command
- DevOps Languages section with specialized support
  </done>
</task>

<task type="auto">
  <name>Task 3: Update CLI Reference with new flags</name>
  <files>README.md</files>
  <action>
Update the CLI Reference section to include the new v1.7 flags in the search command table.

Find the "Searching Commands" subsection and update the flags table to include:

```markdown
| Flag                | Description                          | Default              |
| ------------------- | ------------------------------------ | -------------------- |
| `-n, --index`       | Index to search                      | Auto-detect from cwd |
| `-l, --limit`       | Max results                          | 10                   |
| `--lang`            | Filter by language                   | None                 |
| `--min-score`       | Minimum similarity (0-1)             | 0.3                  |
| `-A, --after-context` | Lines to show after match          | Smart expand         |
| `-B, --before-context` | Lines to show before match        | Smart expand         |
| `-C, --context`     | Lines before and after               | Smart expand         |
| `--no-smart`        | Disable smart context expansion      | Off                  |
| `--hybrid`          | Force hybrid search                  | Auto-detect          |
| `--symbol-type`     | Filter by symbol type (repeatable)   | None                 |
| `--symbol-name`     | Filter by symbol name pattern        | None                 |
| `-i, --interactive` | Enter REPL mode                      | Off                  |
| `--pretty`          | Human-readable output                | JSON                 |
```

Also add a note about the new `languages` command in Managing Indexes section:

```markdown
**List supported languages:** `cocosearch languages [--json]`

Show all languages CocoSearch can index with extensions and symbol support.

```bash
cocosearch languages
```
```
  </action>
  <verify>Grep README.md for "--symbol-type" in the CLI Reference section - should find it in the table</verify>
  <done>CLI Reference updated with all v1.7 flags including --hybrid, --symbol-type, --symbol-name, and context flags</done>
</task>

</tasks>

<verification>
1. README.md contains Quick Start section with 3-step Docker workflow
2. README.md contains Hybrid Search section with before/after examples
3. README.md contains Symbol Filtering section with --symbol-type and --symbol-name examples
4. README.md contains Context Expansion section with -A/-B/-C examples
5. README.md contains Supported Languages section with languages command
6. CLI Reference updated with all new flags
7. Table of Contents updated to include new sections
8. All links in Table of Contents work (anchors match section headers)
</verification>

<success_criteria>
- Quick Start section enables 5-minute onboarding
- All v1.7 features documented with use-case driven examples
- Before/after comparisons show feature value
- CLI flags and MCP parameters documented together
- Supported languages listed with symbol support indicators
- README remains navigable (updated ToC)
</success_criteria>

<output>
After completion, create `.planning/phases/32-full-language-coverage-documentation/32-03-SUMMARY.md`
</output>
