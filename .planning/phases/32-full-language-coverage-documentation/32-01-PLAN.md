---
phase: 32-full-language-coverage-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/cocosearch/search/query.py
  - src/cocosearch/cli.py
autonomous: true

must_haves:
  truths:
    - "User can run 'cocosearch languages' to see all supported languages"
    - "Languages table shows Language, Extensions, and Symbols columns"
    - "All 31 CocoIndex languages are listed in the output"
    - "Symbol-aware languages (Python, JS, TS, Go, Rust) show checkmark"
    - "JSON output available via '--json' flag for scripting"
  artifacts:
    - path: "src/cocosearch/search/query.py"
      provides: "Complete LANGUAGE_EXTENSIONS with 31 languages"
      contains: "yaml"
    - path: "src/cocosearch/cli.py"
      provides: "languages_command function and CLI subcommand"
      contains: "def languages_command"
  key_links:
    - from: "src/cocosearch/cli.py"
      to: "LANGUAGE_EXTENSIONS"
      via: "import from query module"
      pattern: "from cocosearch.search.query import.*LANGUAGE_EXTENSIONS"
---

<objective>
Expand LANGUAGE_EXTENSIONS to all 31 CocoIndex languages and add `cocosearch languages` CLI command.

Purpose: Enable full language coverage matching CocoIndex capabilities and provide users a way to discover supported languages.
Output: Updated query.py with complete language mappings, new `languages` CLI subcommand.
</objective>

<execution_context>
@/Users/fedorzhdanov/.claude/get-shit-done/workflows/execute-plan.md
@/Users/fedorzhdanov/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/32-full-language-coverage-documentation/32-RESEARCH.md
@src/cocosearch/search/query.py
@src/cocosearch/cli.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand LANGUAGE_EXTENSIONS to 31 languages</name>
  <files>src/cocosearch/search/query.py</files>
  <action>
Update LANGUAGE_EXTENSIONS dict to include all 31 CocoIndex-supported languages:

Current (16 languages):
- python, javascript, typescript, rust, go, java, ruby, php, c, cpp, csharp, swift, kotlin, scala, shell

Add missing (15 languages):
- yaml: [".yaml", ".yml"]
- json: [".json"]
- markdown: [".md", ".mdx"]
- html: [".html", ".htm"]
- css: [".css", ".scss"]
- xml: [".xml"]
- toml: [".toml"]
- sql: [".sql"]
- r: [".r", ".R"]
- fortran: [".f", ".f90", ".f95", ".f03"]
- pascal: [".pas", ".dpr"]
- solidity: [".sol"]
- dtd: [".dtd"]
- tsx: [".tsx"] (already covered by typescript, but explicit for clarity)
- jsx: [".jsx"] (already covered by javascript, but explicit for clarity)

Note: Keep existing entries, add new ones. Maintain alphabetical order for readability.

Also add SYMBOL_AWARE_LANGUAGES constant listing the 5 languages with symbol extraction:
```python
SYMBOL_AWARE_LANGUAGES = {"python", "javascript", "typescript", "go", "rust"}
```

Update ALL_LANGUAGES to include the new languages.
  </action>
  <verify>
Run: `python -c "from cocosearch.search.query import LANGUAGE_EXTENSIONS; print(len(LANGUAGE_EXTENSIONS))"`
Expected: Output shows 30+ (at least 28 unique language entries)
  </verify>
  <done>LANGUAGE_EXTENSIONS contains all 31 CocoIndex languages with correct extensions</done>
</task>

<task type="auto">
  <name>Task 2: Add languages CLI command</name>
  <files>src/cocosearch/cli.py</files>
  <action>
Add new `languages` subcommand that displays all supported languages in a Rich table.

1. Add import at top of file:
```python
from cocosearch.search.query import LANGUAGE_EXTENSIONS, DEVOPS_LANGUAGES, SYMBOL_AWARE_LANGUAGES
```

2. Add languages_command function:
```python
def languages_command(args: argparse.Namespace) -> int:
    """Execute the languages command.

    Args:
        args: Parsed command-line arguments.

    Returns:
        Exit code (0 for success).
    """
    console = Console()

    # Build language data from LANGUAGE_EXTENSIONS and DEVOPS_LANGUAGES
    # Combine all sources into unified list
    languages = []

    # Standard languages from LANGUAGE_EXTENSIONS
    for lang, exts in sorted(LANGUAGE_EXTENSIONS.items()):
        languages.append({
            "name": lang.title() if lang not in ("cpp", "csharp", "sql", "xml", "css", "html", "json", "yaml", "toml", "dtd") else lang.upper() if lang in ("sql", "xml", "css", "html", "json", "yaml", "toml", "dtd") else ("C++" if lang == "cpp" else "C#" if lang == "csharp" else lang.title()),
            "extensions": ", ".join(exts),
            "symbols": lang in SYMBOL_AWARE_LANGUAGES,
        })

    # DevOps languages
    devops_display = {"hcl": "HCL", "dockerfile": "Dockerfile", "bash": "Bash"}
    for lang in sorted(DEVOPS_LANGUAGES.keys()):
        languages.append({
            "name": devops_display.get(lang, lang.title()),
            "extensions": f".{lang}" if lang != "dockerfile" else "Dockerfile",
            "symbols": False,
        })

    if args.json:
        import json as json_module
        print(json_module.dumps(languages, indent=2))
    else:
        from rich.table import Table

        table = Table(title="Supported Languages")
        table.add_column("Language", style="cyan", no_wrap=True)
        table.add_column("Extensions", style="dim")
        table.add_column("Symbols", justify="center")

        for lang in languages:
            symbol_mark = "[green]✓[/green]" if lang["symbols"] else "[dim]✗[/dim]"
            table.add_row(lang["name"], lang["extensions"], symbol_mark)

        console.print(table)
        console.print("\n[dim]Symbol-aware languages support --symbol-type and --symbol-name filtering.[/dim]")

    return 0
```

3. Add subparser for languages command (after stats_parser, before clear_parser):
```python
# Languages subcommand
languages_parser = subparsers.add_parser(
    "languages",
    help="List supported languages",
    description="Show all languages CocoSearch can index with file extensions and symbol support.",
)
languages_parser.add_argument(
    "--json",
    action="store_true",
    help="Output as JSON (default: table)",
)
```

4. Update known_subcommands tuple to include "languages"

5. Add command dispatch in main():
```python
elif args.command == "languages":
    sys.exit(languages_command(args))
```
  </action>
  <verify>
Run: `uv run cocosearch languages`
Expected: Rich table showing all languages with Language, Extensions, Symbols columns

Run: `uv run cocosearch languages --json | python -c "import sys,json; d=json.load(sys.stdin); print(len(d))"`
Expected: Output shows 30+ (number of languages)
  </verify>
  <done>
- `cocosearch languages` displays Rich table with all supported languages
- Table shows Language, Extensions, and Symbols (checkmark/x) columns
- `--json` flag outputs JSON array for scripting
- Symbol-aware languages (Python, JS, TS, Go, Rust) show checkmark
  </done>
</task>

</tasks>

<verification>
1. `uv run cocosearch languages` shows all 31+ languages in table format
2. `uv run cocosearch languages --json` outputs valid JSON array
3. Symbol column shows checkmarks for Python, JavaScript, TypeScript, Go, Rust
4. No import errors or runtime crashes
5. `uv run cocosearch --help` shows "languages" in available commands
</verification>

<success_criteria>
- LANGUAGE_EXTENSIONS expanded to 31 languages
- `cocosearch languages` command works with table and JSON output
- Symbol-aware languages correctly identified
- All existing tests still pass
</success_criteria>

<output>
After completion, create `.planning/phases/32-full-language-coverage-documentation/32-01-SUMMARY.md`
</output>
