# Milestone v1.8: Polish & Observability

**Status:** ✅ SHIPPED 2026-02-05
**Phases:** 33-37
**Total Plans:** 13

## Overview

Complete deferred v1.7 features, expand symbol coverage to 10 languages, add observability dashboard with CLI/terminal/web interfaces, create developer skills for Claude Code and OpenCode, and rebrand documentation.

## Phases

### Phase 33: Deferred v1.7 Foundation ✓

**Goal**: Complete search features deferred from v1.7 -- hybrid+symbol combination, nested symbols, query caching
**Depends on**: Phase 32 (v1.7 complete)
**Requirements**: REQ-001, REQ-002, REQ-003, REQ-004
**Plans**: 3 plans
**Completed**: 2026-02-03

Success Criteria:
1. ✓ User can combine hybrid search with symbol filters (--hybrid --symbol-type function works)
2. ✓ Symbol names display with parent context (ClassName.method_name format)
3. ✓ Repeated identical queries return cached results (sub-10ms response)
4. ✓ Semantic cache hits similar queries (cosine >0.95 reuses embeddings)
5. ✓ Cache invalidates automatically on reindex (--no-cache bypasses)

Plans:
- [x] 33-01-PLAN.md -- Hybrid + symbol filter combination (pass WHERE to both vector/keyword before RRF)
- [x] 33-02-PLAN.md -- Nested symbol display (add symbol_name/type/signature to JSON and pretty output)
- [x] 33-03-PLAN.md -- Query caching (exact hash + semantic similarity, invalidate on reindex, --no-cache flag)

### Phase 34: Symbol Extraction Expansion ✓

**Goal**: Extend symbol extraction from 5 to 10 languages with external query files
**Depends on**: Phase 33
**Requirements**: REQ-013, REQ-014, REQ-015, REQ-016, REQ-017, REQ-018
**Plans**: 4 plans
**Completed**: 2026-02-03

Success Criteria:
1. ✓ Java files indexed with functions, classes, interfaces, enums as symbols
2. ✓ C files indexed with functions, structs, enums, typedefs as symbols
3. ✓ C++ files indexed with functions, classes, structs, namespaces as symbols
4. ✓ Ruby files indexed with functions, classes, modules as symbols
5. ✓ PHP files indexed with functions, classes, interfaces, traits as symbols
6. ✓ Symbol extraction uses external .scm query files (not hardcoded Python)

Plans:
- [x] 34-01-PLAN.md -- tree-sitter-language-pack migration + query file architecture
- [x] 34-02-PLAN.md -- Java + Ruby symbol extraction
- [x] 34-03-PLAN.md -- C + C++ symbol extraction
- [x] 34-04-PLAN.md -- PHP symbol extraction + 10-language verification

### Phase 35: Stats Dashboard ✓

**Goal**: Provide index observability via CLI, terminal dashboard, and web UI
**Depends on**: Phase 34
**Requirements**: REQ-005, REQ-006, REQ-007, REQ-008, REQ-009, REQ-010, REQ-011, REQ-012
**Plans**: 3 plans
**Completed**: 2026-02-05

Success Criteria:
1. ✓ `cocosearch stats` shows health metrics (files, chunks, size, last update)
2. ✓ Stats include per-language breakdown and symbol type counts
3. ✓ `--json` flag outputs machine-readable stats for automation
4. ✓ Stats warn if index is stale (>7 days since last update)
5. ✓ HTTP API serves stats at /api/stats endpoint
6. ✓ Terminal dashboard shows live stats with Unicode graphs
7. ✓ Web UI accessible via browser at /dashboard

Plans:
- [x] 35-01-PLAN.md -- Stats CLI enhancement (IndexStats dataclass, Unicode bars, warnings, -v/--json/--all flags)
- [x] 35-02-PLAN.md -- HTTP API + terminal dashboard (/api/stats endpoint, Rich Layout multi-pane dashboard)
- [x] 35-03-PLAN.md -- Web UI dashboard (Chart.js visualization, serve-dashboard command)

### Phase 36: Developer Skills ✓

**Goal**: Create skills for Claude Code and OpenCode with installation and routing guidance
**Depends on**: Phase 35
**Requirements**: REQ-019, REQ-020, REQ-021, REQ-022
**Plans**: 2 plans
**Completed**: 2026-02-05

Success Criteria:
1. ✓ Claude Code SKILL.md exists with setup instructions and MCP configuration
2. ✓ Claude Code skill includes routing guidance (when CocoSearch vs grep/find)
3. ✓ OpenCode SKILL.md exists with setup instructions
4. ✓ OpenCode skill includes routing guidance for code exploration workflows

Plans:
- [x] 36-01-PLAN.md -- Claude Code skill (installation + MCP config + routing guidance)
- [x] 36-02-PLAN.md -- OpenCode skill (installation + MCP config + routing guidance)

### Phase 37: Documentation Rebrand ✓

**Goal**: Update README to reflect CocoSearch's full capabilities beyond "semantic search"
**Depends on**: Phase 36
**Requirements**: REQ-023
**Plans**: 1 plan
**Completed**: 2026-02-05

Success Criteria:
1. ✓ README positions CocoSearch as hybrid search + symbol filtering + context expansion tool
2. ✓ README accurately describes all v1.8 features (caching, 10-language symbols, stats dashboard)
3. ✓ Feature overview matches current capabilities (not just "semantic code search")

Plans:
- [x] 37-01-PLAN.md — Rebrand README with hybrid search positioning, observability section, language tiering

---

## Milestone Summary

**Key Decisions:**
- Apply symbol/language filters BEFORE RRF fusion (not after)
- In-memory session-scoped cache (simpler than diskcache)
- 0.95 cosine similarity threshold for semantic cache hits
- Migrated from tree-sitter-languages to tree-sitter-language-pack 0.13.0
- External .scm query files for all 10 languages (user-extensible)
- Use IndexStats dataclass to aggregate all health metrics
- Single-page HTML with embedded CSS/JS for web dashboard
- Lead with 'Hybrid search for codebases' tagline

**Issues Resolved:**
- Hybrid+symbol combination now works (was falling back to vector-only)
- Nested symbol hierarchy displays qualified names
- Query caching provides sub-10ms repeated query response

**Issues Deferred:**
- Multi-step workflow skills (onboarding, debugging, refactoring)
- Retrieval logic documentation
- MCP tools reference documentation

**Technical Debt:**
None - all tech debt resolved before milestone completion.

---

*For current project status, see .planning/ROADMAP.md*
