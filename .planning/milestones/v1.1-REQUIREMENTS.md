# Requirements Archive: v1.1 Docs & Tests

**Archived:** 2026-01-26
**Status:** SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: CocoSearch

**Defined:** 2026-01-25
**Core Value:** Semantic code search that runs entirely locally — no data leaves your machine.

## v1.1 Requirements

Requirements for Docs & Tests milestone. Each maps to roadmap phases.

### Installation Documentation

- [x] **INST-01**: User can follow guide to install Ollama via brew and pull nomic-embed-text model
- [x] **INST-02**: User can follow guide to set up PostgreSQL with pgvector via Docker Compose
- [x] **INST-03**: User can follow guide to set up Python environment with UV and install cocosearch

### MCP Setup Guides

- [x] **MCP-01**: User can follow guide to configure CocoSearch as MCP server in Claude Code
- [x] **MCP-02**: User can follow guide to configure CocoSearch in Claude Desktop (claude_desktop_config.json)
- [x] **MCP-03**: User can follow guide to configure CocoSearch in OpenCode

### CLI Documentation

- [x] **CLI-01**: User can reference all CLI commands with flags, options, and descriptions
- [x] **CLI-02**: User can see usage examples for each CLI command

### README

- [x] **README-01**: README has quick start showing CLI demo (index → search)
- [x] **README-02**: README has quick start showing MCP setup path
- [x] **README-03**: README links to detailed docs/ guides (implemented as single README.md)

### Test Infrastructure

- [x] **INFRA-01**: pytest configured with proper test discovery and async support
- [x] **INFRA-02**: Mocking infrastructure for PostgreSQL connections
- [x] **INFRA-03**: Mocking infrastructure for Ollama API calls
- [x] **INFRA-04**: pytest fixtures for common test scenarios

### Test Coverage - Indexer

- [x] **TEST-IDX-01**: Tests for indexer/config.py (configuration loading/validation)
- [x] **TEST-IDX-02**: Tests for indexer/flow.py (CocoIndex flow operations)
- [x] **TEST-IDX-03**: Tests for indexer/file_filter.py (include/exclude patterns, gitignore)
- [x] **TEST-IDX-04**: Tests for indexer/embedder.py (embedding generation)
- [x] **TEST-IDX-05**: Tests for indexer/progress.py (progress tracking/display)

### Test Coverage - Search

- [x] **TEST-SRC-01**: Tests for search/db.py (database operations)
- [x] **TEST-SRC-02**: Tests for search/query.py (query execution, vector search)
- [x] **TEST-SRC-03**: Tests for search/formatter.py (result formatting)
- [x] **TEST-SRC-04**: Tests for search/utils.py (utility functions)

### Test Coverage - Management

- [x] **TEST-MGT-01**: Tests for management/git.py (git root detection)
- [x] **TEST-MGT-02**: Tests for management/clear.py (index clearing)
- [x] **TEST-MGT-03**: Tests for management/discovery.py (index discovery)
- [x] **TEST-MGT-04**: Tests for management/stats.py (statistics gathering)

### Test Coverage - CLI

- [x] **TEST-CLI-01**: Tests for cli.py commands (index, search, clear, list, stats)
- [x] **TEST-CLI-02**: Tests for CLI output formatting (JSON, pretty)
- [x] **TEST-CLI-03**: Tests for CLI error handling

### Test Coverage - MCP

- [x] **TEST-MCP-01**: Tests for mcp/server.py tool definitions
- [x] **TEST-MCP-02**: Tests for MCP tool execution (index_codebase, search_code, etc.)
- [x] **TEST-MCP-03**: Tests for MCP error handling and response formatting

## v2 Requirements (Deferred)

### Extended Documentation

- **DOC-01**: Troubleshooting guide for common issues
- **DOC-02**: Architecture documentation for contributors
- **DOC-03**: API reference (generated from docstrings)

### Extended Testing

- **TEST-INT-01**: Integration tests with real PostgreSQL + Ollama
- **TEST-PERF-01**: Performance benchmarks for indexing and search

## Out of Scope

| Feature | Reason |
|---------|--------|
| Hosted documentation site | Markdown files sufficient for v1.1 |
| Test coverage metrics/badges | Focus on writing tests first |
| Automated doc generation | Manual docs provide better quality for v1.1 |
| REPL documentation | Commands + examples sufficient, REPL is discoverable |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| INST-01 | Phase 7 | Complete |
| INST-02 | Phase 7 | Complete |
| INST-03 | Phase 7 | Complete |
| MCP-01 | Phase 7 | Complete |
| MCP-02 | Phase 7 | Complete |
| MCP-03 | Phase 7 | Complete |
| CLI-01 | Phase 7 | Complete |
| CLI-02 | Phase 7 | Complete |
| README-01 | Phase 7 | Complete |
| README-02 | Phase 7 | Complete |
| README-03 | Phase 7 | Complete |
| INFRA-01 | Phase 5 | Complete |
| INFRA-02 | Phase 5 | Complete |
| INFRA-03 | Phase 5 | Complete |
| INFRA-04 | Phase 5 | Complete |
| TEST-IDX-01 | Phase 6 | Complete |
| TEST-IDX-02 | Phase 6 | Complete |
| TEST-IDX-03 | Phase 6 | Complete |
| TEST-IDX-04 | Phase 6 | Complete |
| TEST-IDX-05 | Phase 6 | Complete |
| TEST-SRC-01 | Phase 6 | Complete |
| TEST-SRC-02 | Phase 6 | Complete |
| TEST-SRC-03 | Phase 6 | Complete |
| TEST-SRC-04 | Phase 6 | Complete |
| TEST-MGT-01 | Phase 6 | Complete |
| TEST-MGT-02 | Phase 6 | Complete |
| TEST-MGT-03 | Phase 6 | Complete |
| TEST-MGT-04 | Phase 6 | Complete |
| TEST-CLI-01 | Phase 6 | Complete |
| TEST-CLI-02 | Phase 6 | Complete |
| TEST-CLI-03 | Phase 6 | Complete |
| TEST-MCP-01 | Phase 6 | Complete |
| TEST-MCP-02 | Phase 6 | Complete |
| TEST-MCP-03 | Phase 6 | Complete |

---

## Milestone Summary

**Shipped:** 34 of 34 v1.1 requirements

**Adjusted:**
- README-03: "links to detailed docs/ guides" implemented as single comprehensive README.md instead of separate docs/ directory

**Dropped:** None

---

*Archived: 2026-01-26 as part of v1.1 milestone completion*
